# SSH Setup — подключение Claude к другим серверам

## Проблема

Claude внутри Docker-контейнера Nebulide не может подключиться по SSH к другому серверу.
Ошибка: `Permission denied (publickey)`.

## Причина

SSH-ключ Nebulide-сервера существует, но его **публичная часть** не добавлена
на целевой сервер. Целевой сервер не знает этот ключ и отказывает в доступе.

## Решение (одна команда, один раз на каждый сервер)

Выполнить **на хосте Nebulide** (не внутри Docker, а на самом VPS):

```bash
ssh-copy-id -i /home/nebulide/.ssh/id_rsa.pub user@TARGET_IP
```

Заменить:
- `user` — имя пользователя на целевом сервере (обычно `root`)
- `TARGET_IP` — IP-адрес целевого сервера

### Пример

```bash
ssh-copy-id -i /home/nebulide/.ssh/id_rsa.pub root@45.156.20.105
```

Команда попросит ввести пароль от целевого сервера **один раз**.
После этого Claude сможет подключаться к нему без пароля навсегда.

## Что делает эта команда

1. Берёт публичный ключ из `/home/nebulide/.ssh/id_rsa.pub`
2. Подключается к целевому серверу по паролю
3. Добавляет публичный ключ в `~/.ssh/authorized_keys` на целевом сервере
4. Всё — теперь SSH-аутентификация по ключу работает

## Когда нужно повторять

- Добавил новый сервер, к которому Claude должен подключаться — выполни команду для этого сервера
- Переустановил Nebulide и сгенерировал новый SSH-ключ — выполни команду заново для всех серверов
- Целевой сервер переустановлен — выполни команду заново для него

## Проверка

После выполнения команды, внутри Nebulide (через Claude или терминал):

```bash
ssh root@45.156.20.105 echo "OK"
```

Должен вывести `OK` без запроса пароля.
